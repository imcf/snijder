test-005__jobfile-parser.py

>>>>>> Testing CORRECT job description files:

----------------- parsing jobfiles/decon_it-3_user01.cfg -----------------
 - Parsing worked without errors on 'jobfiles/decon_it-3_user01.cfg'.
{'email': 'user01@mail.xy',
 'exec': '/usr/local/bin/hucore',
 'infiles': ['tests/sample_images/faba128.h5'],
 'pid': 'N/A',
 'progress': 'N/A',
 'server': 'N/A',
 'start': 'N/A',
 'status': 'N/A',
 'tasktype': 'decon',
 'template': 'tests/gc3qm/hucore_templates/decon_faba128_it-3_q-0.5.hgsb',
 'timestamp': 1468220723.16896,
 'type': 'hucore',
 'uid': 'e8c44b23c7dca5c273e9ab96022bea6dce06c193',
 'user': 'user01',
 'ver': '7'}
----------------- parsing jobfiles/decon_it-3_user01_fixed-timestamp.cfg -----------------
 - Parsing worked without errors on 'jobfiles/decon_it-3_user01_fixed-timestamp.cfg'.
{'email': 'user01@mail.xy',
 'exec': '/usr/local/bin/hucore',
 'infiles': ['tests/sample_images/faba128.h5'],
 'pid': 'N/A',
 'progress': 'N/A',
 'server': 'N/A',
 'start': 'N/A',
 'status': 'N/A',
 'tasktype': 'decon',
 'template': 'tests/gc3qm/hucore_templates/decon_faba128_it-3_q-0.5.hgsb',
 'timestamp': 1467979338.137427,
 'type': 'hucore',
 'uid': 'b5c328bb5406328f0a95a9516bef988b0ca99966',
 'user': 'user01',
 'ver': '7'}
----------------- parsing jobfiles/decon_it-3_user02.cfg -----------------
 - Parsing worked without errors on 'jobfiles/decon_it-3_user02.cfg'.
{'email': 'user02@mail.xy',
 'exec': '/usr/local/bin/hucore',
 'infiles': ['tests/sample_images/faba128.h5'],
 'pid': 'N/A',
 'progress': 'N/A',
 'server': 'N/A',
 'start': 'N/A',
 'status': 'N/A',
 'tasktype': 'decon',
 'template': 'tests/gc3qm/hucore_templates/decon_faba128_it-3_q-0.5.hgsb',
 'timestamp': 1468220723.170079,
 'type': 'hucore',
 'uid': '149fb8136b624e235aadcc81f347799f6d7daf92',
 'user': 'user02',
 'ver': '7'}
----------------- parsing jobfiles/decon_it-999_user01.cfg -----------------
 - Parsing worked without errors on 'jobfiles/decon_it-999_user01.cfg'.
{'email': 'user01@mail.xy',
 'exec': '/usr/local/bin/hucore',
 'infiles': ['tests/sample_images/faba128.h5'],
 'pid': 'N/A',
 'progress': 'N/A',
 'server': 'N/A',
 'start': 'N/A',
 'status': 'N/A',
 'tasktype': 'decon',
 'template': 'tests/gc3qm/hucore_templates/decon_faba128_it-999_q-0.00000001.hgsb',
 'timestamp': 1468220723.170577,
 'type': 'hucore',
 'uid': '3d33ce8ff85e91a2c04684d1983e899b6dbe8a84',
 'user': 'user01',
 'ver': '7'}
----------------- parsing jobfiles/preview_user01.cfg -----------------
 - Parsing worked without errors on 'jobfiles/preview_user01.cfg'.
{'email': 'user01@mail.xy',
 'exec': '/usr/local/bin/hucore',
 'infiles': ['tests/sample_images/faba128.h5'],
 'pid': 'N/A',
 'progress': 'N/A',
 'server': 'N/A',
 'start': 'N/A',
 'status': 'N/A',
 'tasktype': 'preview',
 'template': 'tests/gc3qm/hucore_templates/preview_faba128.hgsb',
 'timestamp': 1468711476.644597,
 'type': 'hucore',
 'uid': '79b50fe92015d51644814167642f65dc76b43319',
 'user': 'user01',
 'ver': '7'}

>>>>>> Testing INVALID job description files:
----------------- parsing jobfiles/invalid/v1_broken_section-title.cfg -----------------
 - Got the excpected ValueError from 'jobfiles/invalid/v1_broken_section-title.cfg':
   Error parsing job from jobfiles/invalid/v1_broken_section-title.cfg.

----------------- parsing jobfiles/invalid/v2_broken_section-content_inputfiles.cfg -----------------
 - Got the excpected ValueError from 'jobfiles/invalid/v2_broken_section-content_inputfiles.cfg':
   Can't find useremail in jobfiles/invalid/v2_broken_section-content_inputfiles.cfg.

----------------- parsing jobfiles/invalid/v7_broken_section_hrmjobfile.cfg -----------------
 - Got the excpected ValueError from 'jobfiles/invalid/v7_broken_section_hrmjobfile.cfg':
   Can't find useremail in jobfiles/invalid/v7_broken_section_hrmjobfile.cfg.

----------------- parsing jobfiles/invalid/v7_broken_section_hucore.cfg -----------------
 - Got the excpected ValueError from 'jobfiles/invalid/v7_broken_section_hucore.cfg':
   Can't find tasktype in jobfiles/invalid/v7_broken_section_hucore.cfg.

----------------- parsing jobfiles/invalid/v7_broken_section_hucore_unknown-option.cfg -----------------
 - Got the excpected ValueError from 'jobfiles/invalid/v7_broken_section_hucore_unknown-option.cfg':
   Section 'hrmjobfile' in file 'jobfiles/invalid/v7_broken_section_hucore_unknown-option.cfg' contains unknown options, jobfile is invalid: [('invalid_option', 'some-value')]

----------------- parsing jobfiles/invalid/v7_broken_timestamp.cfg -----------------
 - Got the excpected ValueError from 'jobfiles/invalid/v7_broken_timestamp.cfg':
   Invalid timestamp: on_parse.

************************* TEST FINISHED! *************************
